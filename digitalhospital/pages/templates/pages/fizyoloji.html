{% extends "layout.html" %}
{% block page_title %}
| Fizyoloji
{% endblock page_title %}

{% block content %}
<div class="container py-5">
    <h1 class="text-center mb-5">Fizyoloji - Anatomi Sistemleri</h1>

    <div class="row">
        {% for system in systems %}
            <div class="col-md-6 mb-4">
                <div class="card h-100 flex-row shadow-sm position-relative">
                    <div class="row g-0 w-100">
                        <div class="col-4">
                            <img src="{{ system.image_url }}" class="img-fluid rounded-start h-100" alt="{{ system.title }}" style="object-fit: cover; height: 100%;">
                        </div>
                        <div class="col-8 d-flex flex-column">
                            <div class="card-body flex-grow-1">
                                <h5 class="card-title">{{ system.title }}</h5>
                                <p class="card-text small">{{ system.description }}</p>
                                <span class="badge bg-success mb-2">Güncel</span>
                            </div>
                            <div class="text-center p-2">
                              <button 
                                  class="btn"
                                  style="background-color:rgb(175, 77, 156); color: white; width: 300px; margin-bottom: 20px;"
                                  data-bs-toggle="modal" 
                                  data-bs-target="#detailModal" 
                                  onclick="openModal(`{{ system.title }}`, `{{ system.image_url }}`, `{{ system.detail_description|escapejs }}`)">
                                  Detay
                              </button>
                          </div>
                          
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="detailModal" tabindex="-1" aria-labelledby="detailModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="detailModalLabel">Başlık</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Kapat"></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-5">
            <img id="modalImage" src="" alt="Resim" class="img-fluid rounded">
          </div>
          <div class="col-md-7">
            <p id="modalDescription" class="mt-3 mt-md-0"></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Modal açılırken verileri yerleştir
function openModal(title, imageUrl, description) {
    document.getElementById('detailModalLabel').innerText = title;
    document.getElementById('modalImage').src = imageUrl;
    document.getElementById('modalDescription').innerText = description;
}
</script>
{% endblock %}


